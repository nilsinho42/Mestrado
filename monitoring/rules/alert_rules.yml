groups:
  - name: model_alerts
    rules:
      - alert: HighInferenceLatency
        expr: avg_over_time(model_inference_latency_seconds[5m]) > 1.0
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: High model inference latency
          description: Model inference latency is above 1 second for 5 minutes

      - alert: HighErrorRate
        expr: rate(model_inference_errors_total[5m]) / rate(model_inference_requests_total[5m]) > 0.1
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: High model error rate
          description: Model error rate is above 10% for 5 minutes

      - alert: LowAccuracy
        expr: model_accuracy < 0.8
        for: 15m
        labels:
          severity: warning
        annotations:
          summary: Low model accuracy
          description: Model accuracy has dropped below 80%

  - name: system_alerts
    rules:
      - alert: HighCPUUsage
        expr: avg_over_time(node_cpu_usage_percent[5m]) > 80
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: High CPU usage
          description: CPU usage is above 80% for 5 minutes

      - alert: HighMemoryUsage
        expr: avg_over_time(node_memory_usage_percent[5m]) > 85
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: High memory usage
          description: Memory usage is above 85% for 5 minutes

      - alert: APIHighLatency
        expr: http_request_duration_seconds{quantile="0.9"} > 2
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: High API latency
          description: 90th percentile of API request duration is above 2 seconds 